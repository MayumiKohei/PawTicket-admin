"use strict";exports.id=711,exports.ids=[711],exports.modules={73711:()=>{var a,b,c;let d,e,f=function(a){let b=[],c=0;for(let d=0;d<a.length;d++){let e=a.charCodeAt(d);e<128?b[c++]=e:(e<2048?b[c++]=e>>6|192:((64512&e)==55296&&d+1<a.length&&(64512&a.charCodeAt(d+1))==56320?(e=65536+((1023&e)<<10)+(1023&a.charCodeAt(++d)),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=63&e|128)}return b},g=function(a){let b=[],c=0,d=0;for(;c<a.length;){let e=a[c++];if(e<128)b[d++]=String.fromCharCode(e);else if(e>191&&e<224){let f=a[c++];b[d++]=String.fromCharCode((31&e)<<6|63&f)}else if(e>239&&e<365){let f=a[c++],g=((7&e)<<18|(63&f)<<12|(63&a[c++])<<6|63&a[c++])-65536;b[d++]=String.fromCharCode(55296+(g>>10)),b[d++]=String.fromCharCode(56320+(1023&g))}else{let f=a[c++],g=a[c++];b[d++]=String.fromCharCode((15&e)<<12|(63&f)<<6|63&g)}}return b.join("")},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(a,b){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();let c=b?this.byteToCharMapWebSafe_:this.byteToCharMap_,d=[];for(let b=0;b<a.length;b+=3){let e=a[b],f=b+1<a.length,g=f?a[b+1]:0,h=b+2<a.length,i=h?a[b+2]:0,j=e>>2,k=(3&e)<<4|g>>4,l=(15&g)<<2|i>>6,m=63&i;!h&&(m=64,f||(l=64)),d.push(c[j],c[k],c[l],c[m])}return d.join("")},encodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(a):this.encodeByteArray(f(a),b)},decodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(a):g(this.decodeStringToByteArray(a,b))},decodeStringToByteArray(a,b){this.init_();let c=b?this.charToByteMapWebSafe_:this.charToByteMap_,d=[];for(let b=0;b<a.length;){let e=c[a.charAt(b++)],f=b<a.length?c[a.charAt(b)]:0,g=++b<a.length?c[a.charAt(b)]:64,h=++b<a.length?c[a.charAt(b)]:64;if(++b,null==e||null==f||null==g||null==h)throw new i;let j=e<<2|f>>4;if(d.push(j),64!==g){let a=f<<4&240|g>>2;if(d.push(a),64!==h){let a=g<<6&192|h;d.push(a)}}}return d},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let j=function(a){let b=f(a);return h.encodeByteArray(b,!0)},k=function(a){return j(a).replace(/\./g,"")};class l extends Error{constructor(a,b,c){super(b),this.code=a,this.customData=c,this.name="FirebaseError",Object.setPrototypeOf(this,l.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,m.prototype.create)}}class m{constructor(a,b,c){this.service=a,this.serviceName=b,this.errors=c}create(a,...b){var c,d;let e=b[0]||{},f=`${this.service}/${a}`,g=this.errors[a],h=g?(c=g,d=e,c.replace(n,(a,b)=>{let c=d[b];return null!=c?String(c):`<${b}?>`})):"Error",i=`${this.serviceName}: ${h} (${f}).`;return new l(f,i,e)}}let n=/\{\$([^}]+)}/g;class o{constructor(a,b,c){this.name=a,this.instanceFactory=b,this.type=c,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(a){return this.instantiationMode=a,this}setMultipleInstances(a){return this.multipleInstances=a,this}setServiceProps(a){return this.serviceProps=a,this}setInstanceCreatedCallback(a){return this.onInstanceCreated=a,this}}let p=[];!function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"}(a||(a={}));let q={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},r=a.INFO,s={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},t=(a,b,...c)=>{if(b<a.logLevel)return;let d=new Date().toISOString(),e=s[b];if(e)console[e](`[${d}]  ${a.name}:`,...c);else throw Error(`Attempted to log a message with an invalid logType (value: ${b})`)};class u{constructor(a){this.name=a,this._logLevel=r,this._logHandler=t,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(b){if(!(b in a))throw TypeError(`Invalid value "${b}" assigned to \`logLevel\``);this._logLevel=b}setLogLevel(a){this._logLevel="string"==typeof a?q[a]:a}get logHandler(){return this._logHandler}set logHandler(a){if("function"!=typeof a)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=a}get userLogHandler(){return this._userLogHandler}set userLogHandler(a){this._userLogHandler=a}debug(...b){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...b),this._logHandler(this,a.DEBUG,...b)}log(...b){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...b),this._logHandler(this,a.VERBOSE,...b)}info(...b){this._userLogHandler&&this._userLogHandler(this,a.INFO,...b),this._logHandler(this,a.INFO,...b)}warn(...b){this._userLogHandler&&this._userLogHandler(this,a.WARN,...b),this._logHandler(this,a.WARN,...b)}error(...b){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...b),this._logHandler(this,a.ERROR,...b)}}let v=new WeakMap,w=new WeakMap,x=new WeakMap,y=new WeakMap,z=new WeakMap,A={get(a,b,c){if(a instanceof IDBTransaction){if("done"===b)return w.get(a);if("objectStoreNames"===b)return a.objectStoreNames||x.get(a);if("store"===b)return c.objectStoreNames[1]?void 0:c.objectStore(c.objectStoreNames[0])}return B(a[b])},set:(a,b,c)=>(a[b]=c,!0),has:(a,b)=>a instanceof IDBTransaction&&("done"===b||"store"===b)||b in a};function B(a){if(a instanceof IDBRequest){let b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("success",e),a.removeEventListener("error",f)},e=()=>{b(B(a.result)),d()},f=()=>{c(a.error),d()};a.addEventListener("success",e),a.addEventListener("error",f)});return b.then(b=>{b instanceof IDBCursor&&v.set(b,a)}).catch(()=>{}),z.set(b,a),b}if(y.has(a))return y.get(a);let b=function(a){if("function"==typeof a)return a!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(e||(e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(a)?function(...b){return a.apply(C(this),b),B(v.get(this))}:function(...b){return B(a.apply(C(this),b))}:function(b,...c){let d=a.call(C(this),b,...c);return x.set(d,b.sort?b.sort():[b]),B(d)};return a instanceof IDBTransaction&&function(a){if(w.has(a))return;let b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("complete",e),a.removeEventListener("error",f),a.removeEventListener("abort",f)},e=()=>{b(),d()},f=()=>{c(a.error||new DOMException("AbortError","AbortError")),d()};a.addEventListener("complete",e),a.addEventListener("error",f),a.addEventListener("abort",f)});w.set(a,b)}(a),(d||(d=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(b=>a instanceof b)?new Proxy(a,A):a}(a);return b!==a&&(y.set(a,b),z.set(b,a)),b}let C=a=>z.get(a),D=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],F=new Map;function G(a,b){if(!(a instanceof IDBDatabase&&!(b in a)&&"string"==typeof b))return;if(F.get(b))return F.get(b);let c=b.replace(/FromIndex$/,""),d=b!==c,e=E.includes(c);if(!(c in(d?IDBIndex:IDBObjectStore).prototype)||!(e||D.includes(c)))return;let f=async function(a,...b){let f=this.transaction(a,e?"readwrite":"readonly"),g=f.store;return d&&(g=g.index(b.shift())),(await Promise.all([g[c](...b),e&&f.done]))[0]};return F.set(b,f),f}A=(a=>({...a,get:(b,c,d)=>G(b,c)||a.get(b,c,d),has:(b,c)=>!!G(b,c)||a.has(b,c)}))(A);class H{constructor(a){this.container=a}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(!function(a){let b=a.getComponent();return(null==b?void 0:b.type)==="VERSION"}(a))return null;{let b=a.getImmediate();return`${b.library}/${b.version}`}}).filter(a=>a).join(" ")}}let I="@firebase/app",J="0.13.0",K=new u("@firebase/app"),L={[I]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},M=new Map,N=new Map,O=new Map;function P(a,b){try{a.container.addComponent(b)}catch(c){K.debug(`Component ${b.name} failed to register with FirebaseApp ${a.name}`,c)}}function Q(a){let b=a.name;if(O.has(b))return K.debug(`There were multiple attempts to register component ${b}.`),!1;for(let c of(O.set(b,a),M.values()))P(c,a);for(let b of N.values())P(b,a);return!0}let R=new m("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});function S(a,b,c){var d;let e=null!=(d=L[a])?d:a;c&&(e+=`-${c}`);let f=e.match(/\s|\//),g=b.match(/\s|\//);if(f||g){let a=[`Unable to register library "${e}" with version "${b}":`];f&&a.push(`library name "${e}" contains illegal characters (whitespace or "/")`),f&&g&&a.push("and"),g&&a.push(`version name "${b}" contains illegal characters (whitespace or "/")`),K.warn(a.join(" "));return}Q(new o(`${e}-version`,()=>({library:e,version:b}),"VERSION"))}let T="firebase-heartbeat-store",U=null;function V(){return U||(U=(function(a,b,{blocked:c,upgrade:d,blocking:e,terminated:f}={}){let g=indexedDB.open(a,1),h=B(g);return d&&g.addEventListener("upgradeneeded",a=>{d(B(g.result),a.oldVersion,a.newVersion,B(g.transaction),a)}),c&&g.addEventListener("blocked",a=>c(a.oldVersion,a.newVersion,a)),h.then(a=>{f&&a.addEventListener("close",()=>f()),e&&a.addEventListener("versionchange",a=>e(a.oldVersion,a.newVersion,a))}).catch(()=>{}),h})("firebase-heartbeat-database",0,{upgrade:(a,b)=>{if(0===b)try{a.createObjectStore(T)}catch(a){console.warn(a)}}}).catch(a=>{throw R.create("idb-open",{originalErrorMessage:a.message})})),U}async function W(a){try{let b=(await V()).transaction(T),c=await b.objectStore(T).get(Y(a));return await b.done,c}catch(a){if(a instanceof l)K.warn(a.message);else{let b=R.create("idb-get",{originalErrorMessage:null==a?void 0:a.message});K.warn(b.message)}}}async function X(a,b){try{let c=(await V()).transaction(T,"readwrite"),d=c.objectStore(T);await d.put(b,Y(a)),await c.done}catch(a){if(a instanceof l)K.warn(a.message);else{let b=R.create("idb-set",{originalErrorMessage:null==a?void 0:a.message});K.warn(b.message)}}}function Y(a){return`${a.name}!${a.options.appId}`}class Z{constructor(a){this.container=a,this._heartbeatsCache=null;let b=this.container.getProvider("app").getImmediate();this._storage=new _(b),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var a,b;try{let c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=$();if((null==(a=this._heartbeatsCache)?void 0:a.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(b=this._heartbeatsCache)?void 0:b.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(a=>a.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:c}),this._heartbeatsCache.heartbeats.length>30){let a=function(a){if(0===a.length)return -1;let b=0,c=a[0].date;for(let d=1;d<a.length;d++)a[d].date<c&&(c=a[d].date,b=d);return b}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){K.warn(a)}}async getHeartbeatsHeader(){var a;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(a=this._heartbeatsCache)?void 0:a.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let b=$(),{heartbeatsToSend:c,unsentEntries:d}=function(a,b=1024){let c=[],d=a.slice();for(let e of a){let a=c.find(a=>a.agent===e.agent);if(a){if(a.dates.push(e.date),aa(c)>b){a.dates.pop();break}}else if(c.push({agent:e.agent,dates:[e.date]}),aa(c)>b){c.pop();break}d=d.slice(1)}return{heartbeatsToSend:c,unsentEntries:d}}(this._heartbeatsCache.heartbeats),e=k(JSON.stringify({version:2,heartbeats:c}));return this._heartbeatsCache.lastSentHeartbeatDate=b,d.length>0?(this._heartbeatsCache.heartbeats=d,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),e}catch(a){return K.warn(a),""}}}function $(){return new Date().toISOString().substring(0,10)}class _{constructor(a){this.app=a,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(a){return!1}}()&&new Promise((a,b)=>{try{let c=!0,d="validate-browser-context-for-indexeddb-analytics-module",e=self.indexedDB.open(d);e.onsuccess=()=>{e.result.close(),c||self.indexedDB.deleteDatabase(d),a(!0)},e.onupgradeneeded=()=>{c=!1},e.onerror=()=>{var a;b((null==(a=e.error)?void 0:a.message)||"")}}catch(a){b(a)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let a=await W(this.app);return(null==a?void 0:a.heartbeats)?a:{heartbeats:[]}}}async overwrite(a){var b;if(await this._canUseIndexedDBPromise){let c=await this.read();return X(this.app,{lastSentHeartbeatDate:null!=(b=a.lastSentHeartbeatDate)?b:c.lastSentHeartbeatDate,heartbeats:a.heartbeats})}}async add(a){var b;if(await this._canUseIndexedDBPromise){let c=await this.read();return X(this.app,{lastSentHeartbeatDate:null!=(b=a.lastSentHeartbeatDate)?b:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...a.heartbeats]})}}}function aa(a){return k(JSON.stringify({version:2,heartbeats:a})).length}Q(new o("platform-logger",a=>new H(a),"PRIVATE")),Q(new o("heartbeat",a=>new Z(a),"PRIVATE")),S(I,J,""),S(I,J,"esm2017"),S("fire-js","");let ab="firebasestorage.googleapis.com";class ac extends l{constructor(a,b,c=0){super(ad(a),`Firebase Storage: ${b} (${ad(a)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ac.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return ad(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function ad(a){return"storage/"+a}function ae(a){return new ac(b.INVALID_ARGUMENT,a)}function af(){return new ac(b.APP_DELETED,"The Firebase app was deleted.")}!function(a){a.UNKNOWN="unknown",a.OBJECT_NOT_FOUND="object-not-found",a.BUCKET_NOT_FOUND="bucket-not-found",a.PROJECT_NOT_FOUND="project-not-found",a.QUOTA_EXCEEDED="quota-exceeded",a.UNAUTHENTICATED="unauthenticated",a.UNAUTHORIZED="unauthorized",a.UNAUTHORIZED_APP="unauthorized-app",a.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",a.INVALID_CHECKSUM="invalid-checksum",a.CANCELED="canceled",a.INVALID_EVENT_NAME="invalid-event-name",a.INVALID_URL="invalid-url",a.INVALID_DEFAULT_BUCKET="invalid-default-bucket",a.NO_DEFAULT_BUCKET="no-default-bucket",a.CANNOT_SLICE_BLOB="cannot-slice-blob",a.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",a.NO_DOWNLOAD_URL="no-download-url",a.INVALID_ARGUMENT="invalid-argument",a.INVALID_ARGUMENT_COUNT="invalid-argument-count",a.APP_DELETED="app-deleted",a.INVALID_ROOT_OPERATION="invalid-root-operation",a.INVALID_FORMAT="invalid-format",a.INTERNAL_ERROR="internal-error",a.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(b||(b={}));class ag{constructor(a,b){this.bucket=a,this.path_=b}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,c){let d;try{d=ag.makeFromUrl(a,c)}catch(b){return new ag(a,"")}if(""===d.path)return d;throw new ac(b.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}static makeFromUrl(a,c){let d=null,e="([A-Za-z0-9.\\-_]+)",f=RegExp("^gs://"+e+"(/(.*))?$","i");function g(a){a.path_=decodeURIComponent(a.path)}let h=c.replace(/[.]/g,"\\."),i=RegExp(`^https?://${h}/v[A-Za-z0-9_]+/b/${e}/o(/([^?#]*).*)?$`,"i"),j=c===ab?"(?:storage.googleapis.com|storage.cloud.google.com)":c,k=[{regex:f,indices:{bucket:1,path:3},postModify:function(a){"/"===a.path.charAt(a.path.length-1)&&(a.path_=a.path_.slice(0,-1))}},{regex:i,indices:{bucket:1,path:3},postModify:g},{regex:RegExp(`^https?://${j}/${e}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:g}];for(let b=0;b<k.length;b++){let c=k[b],e=c.regex.exec(a);if(e){let a=e[c.indices.bucket],b=e[c.indices.path];b||(b=""),d=new ag(a,b),c.postModify(d);break}}if(null==d)throw new ac(b.INVALID_URL,"Invalid URL '"+a+"'.");return d}}class ah{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function ai(a,b,c,d){if(d<b)throw ae(`Invalid value for '${a}'. Expected ${b} or greater.`);if(d>c)throw ae(`Invalid value for '${a}'. Expected ${c} or less.`)}!function(a){a[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT"}(c||(c={}));class aj{constructor(a,b,c,d,e,f,g,h,i,j,k,l=!0,m=!1){this.url_=a,this.method_=b,this.headers_=c,this.body_=d,this.successCodes_=e,this.additionalRetryCodes_=f,this.callback_=g,this.errorCallback_=h,this.timeout_=i,this.progressCallback_=j,this.connectionFactory_=k,this.retry=l,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((a,b)=>{this.resolve_=a,this.reject_=b,this.start_()})}start_(){let a=(a,b)=>{if(b)return void a(!1,new ak(!1,null,!0));let d=this.connectionFactory_();this.pendingConnection_=d;let e=a=>{let b=a.loaded,c=a.lengthComputable?a.total:-1;null!==this.progressCallback_&&this.progressCallback_(b,c)};null!==this.progressCallback_&&d.addUploadProgressListener(e),d.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&d.removeUploadProgressListener(e),this.pendingConnection_=null;let b=d.getErrorCode()===c.NO_ERROR,f=d.getStatus();if(!b||function(a,b){let c=a>=500&&a<600,d=-1!==[408,429].indexOf(a),e=-1!==b.indexOf(a);return c||d||e}(f,this.additionalRetryCodes_)&&this.retry)return void a(!1,new ak(!1,null,d.getErrorCode()===c.ABORT));a(!0,new ak(-1!==this.successCodes_.indexOf(f),d))})},d=(a,c)=>{let d=this.resolve_,e=this.reject_,f=c.connection;if(c.wasSuccessCode)try{let a=this.callback_(f,f.getResponse());void 0!==a?d(a):d()}catch(a){e(a)}else if(null!==f){let a=new ac(b.UNKNOWN,"An unknown error occurred, please check the error payload for server response.");a.serverResponse=f.getErrorText(),e(this.errorCallback_?this.errorCallback_(f,a):a)}else e(c.canceled?this.appDelete_?af():new ac(b.CANCELED,"User canceled the upload/download."):new ac(b.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?d(!1,new ak(!1,null,!0)):this.backoffId_=function(a,b,c){let d=1,e=null,f=null,g=!1,h=0,i=!1;function j(...a){i||(i=!0,b.apply(null,a))}function k(b){e=setTimeout(()=>{e=null,a(m,2===h)},b)}function l(){f&&clearTimeout(f)}function m(a,...b){let c;if(i)return void l();if(a||2===h||g){l(),j.call(null,a,...b);return}d<64&&(d*=2),1===h?(h=2,c=0):c=(d+Math.random())*1e3,k(c)}let n=!1;function o(a){n||(n=!0,l(),!i&&(null!==e?(a||(h=2),clearTimeout(e),k(0)):a||(h=1)))}return k(0),f=setTimeout(()=>{g=!0,o(!0)},c),o}(a,d,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ak{constructor(a,b,c){this.wasSuccessCode=a,this.connection=b,this.canceled=!!c}}class al{constructor(a,b){this._service=a,b instanceof ag?this._location=b:this._location=ag.makeFromUrl(b,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,b){return new al(a,b)}get root(){let a=new ag(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){var a=this._location.path;let b=a.lastIndexOf("/",a.length-2);return -1===b?a:a.slice(b+1)}get storage(){return this._service}get parent(){let a=function(a){if(0===a.length)return null;let b=a.lastIndexOf("/");return -1===b?"":a.slice(0,b)}(this._location.path);if(null===a)return null;let b=new ag(this._location.bucket,a);return new al(this._service,b)}_throwIfRoot(a){if(""===this._location.path)throw new ac(b.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function am(a,b){let c=null==b?void 0:b.storageBucket;return null==c?null:ag.makeFromBucketSpec(c,a)}class an{constructor(a,b,c,d,e,f=!1){this.app=a,this._authProvider=b,this._appCheckProvider=c,this._url=d,this._firebaseVersion=e,this._isUsingEmulator=f,this._bucket=null,this._host=ab,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=d?this._bucket=ag.makeFromBucketSpec(d,this._host):this._bucket=am(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,null!=this._url?this._bucket=ag.makeFromBucketSpec(this._url,a):this._bucket=am(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){ai("time",0,1/0,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){ai("time",0,1/0,a),this._maxOperationRetryTime=a}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let a=this._authProvider.getImmediate({optional:!0});if(a){let b=await a.getToken();if(null!==b)return b.accessToken}return null}async _getAppCheckToken(){var a;if(null!=(a=this.app)&&void 0!==a.settings&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let b=this._appCheckProvider.getImmediate({optional:!0});return b?(await b.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new al(this,a)}_makeRequest(a,b,c,d,e=!0){if(this._deleted)return new ah(af());{let f=function(a,b,c,d,e,f,g=!0,h=!1){let i=function(a){let b=encodeURIComponent,c="?";for(let d in a)a.hasOwnProperty(d)&&(c=c+(b(d)+"=")+b(a[d])+"&");return c.slice(0,-1)}(a.urlParams),j=a.url+i,k=Object.assign({},a.headers);return b&&(k["X-Firebase-GMPID"]=b),null!==c&&c.length>0&&(k.Authorization="Firebase "+c),k["X-Firebase-Storage-Version"]="webjs/"+(null!=f?f:"AppManager"),null!==d&&(k["X-Firebase-AppCheck"]=d),new aj(j,a.method,k,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,e,g,h)}(a,this._appId,c,d,b,this._firebaseVersion,e,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(a,b){let[c,d]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(a,b,c,d).getPromise()}}Q(new o("storage",function(a,{instanceIdentifier:b}){let c=a.getProvider("app").getImmediate();return new an(c,a.getProvider("auth-internal"),a.getProvider("app-check-internal"),b,"11.8.0")},"PUBLIC").setMultipleInstances(!0)),S("@firebase/storage","0.13.11")}};