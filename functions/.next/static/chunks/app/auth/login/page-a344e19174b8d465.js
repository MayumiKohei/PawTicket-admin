(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{330:(e,a,r)=>{Promise.resolve().then(r.bind(r,4177))},4177:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var t=r(5155),i=r(2115),n=r(7016),s=r(7440),o=r(5695),l=r(4979),d=r.n(l);function c(){let[e,a]=(0,i.useState)(""),[r,l]=(0,i.useState)(""),[c,p]=(0,i.useState)(!1),[u,m]=(0,i.useState)(""),g=(0,o.useRouter)(),h=async a=>{if(a.preventDefault(),p(!0),m(""),!s.j6){m("認証サービスが利用できません。"),p(!1);return}try{let a=await (0,n.x9)(s.j6,e,r);if(["3S6PdCwFK2TjGgQMUBnGkp9gTn53","U0rr9czqZGbmR1khmfhUSuPXEtJ2","3S6PdCwFK2TjGgQMUBnGkp9gTn53"].includes(a.user.uid)){let e=await a.user.getIdToken(),r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({idToken:e})});(await r.json()).success?g.push("/"):m("セッションの設定に失敗しました。")}else m("管理者権限がありません。"),await (null===s.j6||void 0===s.j6?void 0:s.j6.signOut())}catch(e){console.error("ログインエラー:",e),m("ログインに失敗しました。メールアドレスとパスワードを確認してください。")}finally{p(!1)}};return(0,t.jsx)("div",{className:d().loginContainer,children:(0,t.jsxs)("div",{className:d().loginCard,children:[(0,t.jsx)("h1",{children:"PawTicket Admin"}),(0,t.jsx)("h2",{children:"管理者ログイン"}),(0,t.jsxs)("form",{onSubmit:h,className:d().loginForm,children:[(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{htmlFor:"email",children:"メールアドレス"}),(0,t.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>a(e.target.value),required:!0,placeholder:"admin@example.com"})]}),(0,t.jsxs)("div",{className:d().formGroup,children:[(0,t.jsx)("label",{htmlFor:"password",children:"パスワード"}),(0,t.jsx)("input",{type:"password",id:"password",value:r,onChange:e=>l(e.target.value),required:!0,placeholder:"パスワードを入力"})]}),u&&(0,t.jsx)("div",{className:d().error,children:u}),(0,t.jsx)("button",{type:"submit",disabled:c,className:d().loginButton,children:c?"ログイン中...":"ログイン"})]})]})})}},4979:e=>{e.exports={loginContainer:"login_loginContainer__1Adbm",loginCard:"login_loginCard__kH_Yz",loginForm:"login_loginForm__I1imL",formGroup:"login_formGroup__2jbVa",error:"login_error__BVYzc",loginButton:"login_loginButton__OAdrO"}},7440:(e,a,r)=>{"use strict";let t,i;r.d(a,{j6:()=>c});var n=r(2479),s=r(7016),o=r(3681),l=r(7398);t=0===(0,n.Dk)().length?(0,n.Wp)({apiKey:"AIzaSyAjmdbaSlO2PJtnThYOI9mrpsoBgq6JWDc",authDomain:"pt-admin-4d877.firebaseapp.com",projectId:"pt-admin-4d877",storageBucket:"pt-admin-4d877.firebasestorage.app",messagingSenderId:"420928013456",appId:"1:420928013456:web:42cde435f10b1949c30415",measurementId:"G-9GWH9VTJP6"}):(0,n.Sx)();let d="appExpo";try{i=(0,n.Sx)(d)}catch(e){i=(0,n.Wp)({apiKey:"AIzaSyBTE5Gpz4rnnVhlDXQA3Va4DNARIhhJhrk",authDomain:"pawticket-6b651.firebaseapp.com",projectId:"pawticket-6b651",storageBucket:"pawticket-6b651.firebasestorage.app",messagingSenderId:"405389818227",appId:"1:405389818227:web:0f77dc15826b1eac13ed06",measurementId:"G-5YNTM317YJ"},d)}let c=(0,s.xI)(t);(0,o.aU)(t),(0,l.c7)(t),(0,o.aU)(i),(0,l.c7)(i)}},e=>{e.O(0,[840,779,566,568,441,964,358],()=>e(e.s=330)),_N_E=e.O()}]);