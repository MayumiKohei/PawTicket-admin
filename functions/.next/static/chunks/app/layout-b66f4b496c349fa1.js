(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1138:()=>{},1441:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,4147,23)),Promise.resolve().then(a.t.bind(a,8489,23)),Promise.resolve().then(a.bind(a,5145)),Promise.resolve().then(a.bind(a,4479)),Promise.resolve().then(a.t.bind(a,1138,23)),Promise.resolve().then(a.t.bind(a,347,23))},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},4479:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var n=a(5155),r=a(2115),i=a(5145);function o(){let{user:e}=(0,i.A)(),[t,a]=(0,r.useState)("");return((0,r.useEffect)(()=>{if(!e)return;let t=()=>{let e=localStorage.getItem("lastActivity");if(!e)return;let t=432e5-(Date.now()-parseInt(e));if(t<=0)return void a("セッション期限切れ");let n=Math.floor(t/36e5),r=Math.floor(t%36e5/6e4);n>0?a("".concat(n,"時間").concat(r,"分")):a("".concat(r,"分"))};t();let n=setInterval(t,6e4);return()=>clearInterval(n)},[e]),e&&t)?(0,n.jsxs)("div",{style:{position:"fixed",top:"10px",right:"10px",background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"12px",zIndex:1e3},children:["セッション残り: ",t]}):null}},5145:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,default:()=>u});var n=a(5155),r=a(2115),i=a(7016),o=a(7440),s=a(5695);let l=(0,r.createContext)({user:null,loading:!0,isAdmin:!1}),c=()=>(0,r.useContext)(l),d=["3S6PdCwFK2TjGgQMUBnGkp9gTn53"];function u(e){let{children:t}=e,[a,c]=(0,r.useState)(null),[u,p]=(0,r.useState)(!0),m=(0,s.useRouter)(),v=(0,s.usePathname)(),h=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),await o.j6.signOut(),localStorage.removeItem("lastActivity"),m.push("/auth/login"),alert("セッションが期限切れになりました。再度ログインしてください。")}catch(e){console.error("セッション期限切れ処理エラー:",e)}};(0,r.useEffect)(()=>{if(!a)return;let e=localStorage.getItem("lastActivity"),t=Date.now();if(e){let a=432e5-(t-parseInt(e));if(a<=0)return void h();let n=setTimeout(()=>{h()},a);return()=>clearTimeout(n)}localStorage.setItem("lastActivity",t.toString());let n=()=>{localStorage.setItem("lastActivity",Date.now().toString())};return window.addEventListener("mousemove",n),window.addEventListener("keydown",n),window.addEventListener("touchstart",n),window.addEventListener("click",n),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("keydown",n),window.removeEventListener("touchstart",n),window.removeEventListener("click",n)}},[a,h]),(0,r.useEffect)(()=>{let e=(0,i.hg)(o.j6,e=>{c(e),p(!1),e||"/auth/login"===v?e&&"/auth/login"===v&&(d.includes(e.uid)?m.push("/"):o.j6.signOut()):m.push("/auth/login")});return()=>e()},[m,v]);let f=!!a&&d.includes(a.uid);return(0,n.jsx)(l.Provider,{value:{user:a,loading:u,isAdmin:f},children:t})}},7440:(e,t,a)=>{"use strict";let n,r;a.d(t,{j6:()=>d});var i=a(2479),o=a(7016),s=a(3681),l=a(7398);n=0===(0,i.Dk)().length?(0,i.Wp)({apiKey:"AIzaSyAjmdbaSlO2PJtnThYOI9mrpsoBgq6JWDc",authDomain:"pt-admin-4d877.firebaseapp.com",projectId:"pt-admin-4d877",storageBucket:"pt-admin-4d877.firebasestorage.app",messagingSenderId:"420928013456",appId:"1:420928013456:web:42cde435f10b1949c30415",measurementId:"G-9GWH9VTJP6"}):(0,i.Sx)();let c="appExpo";try{r=(0,i.Sx)(c)}catch(e){r=(0,i.Wp)({apiKey:"AIzaSyBTE5Gpz4rnnVhlDXQA3Va4DNARIhhJhrk",authDomain:"pawticket-6b651.firebaseapp.com",projectId:"pawticket-6b651",storageBucket:"pawticket-6b651.firebasestorage.app",messagingSenderId:"405389818227",appId:"1:405389818227:web:0f77dc15826b1eac13ed06",measurementId:"G-5YNTM317YJ"},c)}let d=(0,o.xI)(n);(0,s.aU)(n),(0,l.c7)(n),(0,s.aU)(r),(0,l.c7)(r)},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{e.O(0,[35,779,566,568,441,964,358],()=>e(e.s=1441)),_N_E=e.O()}]);