(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{445:(e,a,t)=>{Promise.resolve().then(t.bind(t,9328))},837:e=>{e.exports={dashboard:"app_dashboard__CLE5l",sidebar:"app_sidebar__mEgQl",sidebar__header:"app_sidebar__header__XCGER",sidebar__nav:"app_sidebar__nav__hamVG",active:"app_active__dPqO8",sidebar__footer:"app_sidebar__footer__970jN",content:"app_content__7IxbH",content__header:"app_content__header__KGob0",content__card:"app_content__card__WgF_T",content__card__stats:"app_content__card__stats__84M8b",authLoading:"app_authLoading__rYJvP",authError:"app_authError__E1poB","stat-card":"app_stat-card__zThVn",value:"app_value__A7nx1",icon:"app_icon___3bqa"}},5671:(e,a,t)=>{"use strict";t.d(a,{I:()=>l});var s=t(5155);let n={"x-circle":"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-9.414l2.828-2.829 1.415 1.415L13.414 12l2.829 2.828-1.415 1.415L12 13.414l-2.828 2.829-1.415-1.415L10.586 12 7.757 9.172l1.415-1.415L12 10.586z","check-circle":"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.997-6l7.07-7.071-1.414-1.414-5.656 5.657-2.829-2.829-1.414 1.414L11.003 16z",clock:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm1-8h4v2h-6V7h2v5z",bell:"M12 22a2.98 2.98 0 0 0 2.818-2H9.182A2.98 2.98 0 0 0 12 22zm7-7.414V10c0-3.217-2.185-5.927-5.145-6.742C13.562 2.52 12.846 2 12 2s-1.562.52-1.855 1.258C7.185 4.074 5 6.783 5 10v4.586l-1.707 1.707A1 1 0 0 0 3 17v1a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-1a1 1 0 0 0-.293-.707L19 14.586z",dashboard:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z",close:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z",logout:"M16 13v-2H7V8l-5 4 5 4v-3z M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"},l=e=>{let{name:a,size:t=24,className:l=""}=e,i=n[a];return i?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:t,height:t,className:l,children:(0,s.jsx)("path",{d:i})}):(console.warn('Icon "'.concat(a,'" not found')),null)}},7440:(e,a,t)=>{"use strict";let s,n;t.d(a,{j6:()=>d});var l=t(2479),i=t(7016),o=t(3681),c=t(7398);s=0===(0,l.Dk)().length?(0,l.Wp)({apiKey:"AIzaSyAjmdbaSlO2PJtnThYOI9mrpsoBgq6JWDc",authDomain:"pt-admin-4d877.firebaseapp.com",projectId:"pt-admin-4d877",storageBucket:"pt-admin-4d877.firebasestorage.app",messagingSenderId:"420928013456",appId:"1:420928013456:web:42cde435f10b1949c30415",measurementId:"G-9GWH9VTJP6"}):(0,l.Sx)();let r="appExpo";try{n=(0,l.Sx)(r)}catch(e){n=(0,l.Wp)({apiKey:"AIzaSyBTE5Gpz4rnnVhlDXQA3Va4DNARIhhJhrk",authDomain:"pawticket-6b651.firebaseapp.com",projectId:"pawticket-6b651",storageBucket:"pawticket-6b651.firebasestorage.app",messagingSenderId:"405389818227",appId:"1:405389818227:web:0f77dc15826b1eac13ed06",measurementId:"G-5YNTM317YJ"},r)}let d=(0,i.xI)(s);(0,o.aU)(s),(0,c.c7)(s),(0,o.aU)(n),(0,c.c7)(n)},7944:e=>{e.exports={container:"list_container__c_Enm",sidebar:"list_sidebar__H8fdN",main:"list_main__ycTUc",tableWrapper:"list_tableWrapper__joH3u",listTable:"list_listTable__q8RO6",bodyCell:"list_bodyCell__Ntnjo",modalOverlay:"list_modalOverlay__fQEsw",modalContent:"list_modalContent__jnr9R",modalFadeIn:"list_modalFadeIn__Ve5wW",modalClose:"list_modalClose__kwg_S",modalForm:"list_modalForm__fVOHa",modalButtonRow:"list_modalButtonRow___IoS_",modalButton:"list_modalButton__ff1v9",save:"list_save__jdml0",delete:"list_delete__a0Zfz",close:"list_close__WcyX7"}},9328:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(5155),n=t(2115),l=t(9592),i=t(7944),o=t.n(i),c=t(6766);function r(e){let{open:a,onClose:t,children:n}=e;return a?(0,s.jsx)("div",{className:o().modalOverlay,children:(0,s.jsxs)("div",{className:o().modalContent,children:[(0,s.jsx)("button",{onClick:t,className:o().modalClose,children:"\xd7"}),n]})}):null}function d(){let[e,a]=(0,n.useState)([]),[t,i]=(0,n.useState)(!0),[d,h]=(0,n.useState)(!1),[_,p]=(0,n.useState)(null),[m,u]=(0,n.useState)({}),b=async()=>{i(!0);let e=await fetch("/api/admin/notifications"),t=await e.json();t.success&&a(t.announcements),i(!1)};(0,n.useEffect)(()=>{b()},[]);let j=()=>{h(!1),p(null)},x=async e=>{e.preventDefault();let a=await fetch("/api/admin/notifications",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),t=await a.json();t.success?(alert("更新しました"),j(),b()):alert("更新に失敗: "+t.message)},v=async()=>{if(!_||!confirm("本当に削除しますか？"))return;let e=await fetch("/api/admin/notifications",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:_.id})}),a=await e.json();a.success?(alert("削除しました"),j(),b()):alert("削除に失敗: "+a.message)},f=[...e].sort((e,a)=>e.date?a.date?a.date.localeCompare(e.date):-1:1);return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsx)(l.B,{}),(0,s.jsxs)("main",{className:o().main,children:[(0,s.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:(0,s.jsx)("h2",{children:"お知らせ一覧"})}),t?(0,s.jsx)("p",{children:"読み込み中..."}):(0,s.jsx)("div",{className:o().tableWrapper,children:(0,s.jsxs)("table",{className:o().listTable,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"タイトル"}),(0,s.jsx)("th",{children:"日付"}),(0,s.jsx)("th",{children:"本文"})]})}),(0,s.jsx)("tbody",{children:f.map(e=>(0,s.jsxs)("tr",{onClick:()=>{p(e),u({...e}),h(!0)},children:[(0,s.jsx)("td",{children:e.title}),(0,s.jsx)("td",{children:e.date}),(0,s.jsx)("td",{className:o().bodyCell,children:e.body})]},e.id))})]})}),(0,s.jsx)(r,{open:d,onClose:j,children:_&&(0,s.jsxs)("form",{onSubmit:x,className:o().modalForm,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"タイトル"}),(0,s.jsx)("input",{value:m.title||"",onChange:e=>u({...m,title:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"日付"}),(0,s.jsx)("input",{type:"date",value:m.date||"",onChange:e=>u({...m,date:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"写真"}),(0,s.jsx)("br",{}),m.photoUrl&&(0,s.jsx)(c.default,{src:m.photoUrl,alt:"写真",width:80,height:60,style:{maxWidth:80,height:"auto"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"本文"}),(0,s.jsx)("textarea",{value:m.body||"",onChange:e=>u({...m,body:e.target.value})})]}),(0,s.jsxs)("div",{className:o().modalButtonRow,children:[(0,s.jsx)("button",{type:"submit",className:"".concat(o().modalButton," ").concat(o().save),children:"保存"}),(0,s.jsx)("button",{type:"button",onClick:v,className:"".concat(o().modalButton," ").concat(o().delete),children:"削除"}),(0,s.jsx)("button",{type:"button",onClick:j,className:"".concat(o().modalButton," ").concat(o().close),children:"閉じる"})]})]})})]})]})}},9592:(e,a,t)=>{"use strict";t.d(a,{B:()=>p});var s=t(5155),n=t(6874),l=t.n(n),i=t(5695),o=t(2115),c=t(7016),r=t(7440),d=t(837),h=t.n(d),_=t(5671);function p(){let e=(0,i.usePathname)(),a=(0,i.useRouter)(),[t,n]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=()=>{n(new Date().toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))};e();let a=setInterval(e,1e3);return()=>clearInterval(a)},[]);let d=async()=>{try{r.j6&&await (0,c.CI)(r.j6),await fetch("/api/auth/logout",{method:"POST"}),a.push("/auth/login")}catch(e){console.error("ログアウトエラー:",e)}};return(0,s.jsxs)("aside",{className:h().sidebar,children:[(0,s.jsxs)("div",{className:h().sidebar__header,children:[(0,s.jsx)("h1",{children:"PawTicket Admin"}),(0,s.jsx)("p",{children:"管理パネル"})]}),(0,s.jsx)("nav",{className:h().sidebar__nav,children:(0,s.jsx)("ul",{children:[{name:"ダッシュボード",path:"/",icon:"dashboard"},{name:"承認待ち",path:"/pending",icon:"clock"},{name:"承認済み",path:"/approved",icon:"check-circle"},{name:"却下済み",path:"/rejected",icon:"x-circle"},{name:"プッシュ通知",path:"/notifications",icon:"bell"},{name:"お知らせ一覧",path:"/notifications/list",icon:"bell"},{name:"お知らせ投稿",path:"/notifications/post",icon:"bell"}].map(a=>(0,s.jsx)("li",{children:(0,s.jsxs)(l(),{href:a.path,className:e===a.path?h().active:"",children:[(0,s.jsx)(_.I,{name:a.icon}),a.name]})},a.path))})}),(0,s.jsxs)("div",{className:h().sidebar__footer,children:[(0,s.jsxs)("div",{children:["現在時刻: ",t]}),(0,s.jsxs)("button",{onClick:d,style:{background:"none",border:"none",color:"#666",cursor:"pointer",fontSize:"0.9rem",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,s.jsx)(_.I,{name:"logout"}),"ログアウト"]})]})]})}}},e=>{e.O(0,[174,779,566,568,874,766,441,964,358],()=>e(e.s=445)),_N_E=e.O()}]);